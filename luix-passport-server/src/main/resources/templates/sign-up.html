<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Passport | Sign up</title>
	<link rel="shortcut icon" th:href="@{/favicon.ico}"/>
	<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white rounded-lg py-10">
<div class="container relative grid h-svh flex-col items-center justify-center lg:max-w-none lg:grid-cols-2">
	<div class="lg:flex relative hidden lg:px-28 ms-10 mb-36">
		<div class="max-md:text-center">
			<img alt="Logo" th:src="@{/assets/images/logos/logo-with-text.svg}" class="h-14 my-12" />
			<h2 class="lg:text-5xl text-4xl font-extrabold lg:leading-[55px]">
				Join Our Community
			</h2>
			<h4 class="mt-6">Create your account to unlock exclusive features and personalized experiences. Get started in just a few clicks.</h4>
			<p class="text-sm mt-10">Already have an account? <a href="/login" class="text-blue-700 font-semibold hover:underline ml-1">Sign in here</a></p>
		</div>
	</div>
	<div class="flex flex-col w-full h-full lg:px-48 px-5 text-center bg-white rounded-3xl">
		<img alt="Logo" th:src="@{/assets/images/logos/logo-round.svg}" class="h-16 my-5" />
		<h3 class="mb-6 text-2xl font-extrabold text-dark-gray-900">Create Account</h3>
		<form method="post" th:action="@{/open-api/accounts/register}" onsubmit="return validateForm()">
			<!-- Server-side errors -->
			<div th:if="${usernameError}" class="py-2">
				<div class="flex justify-center">
					<div class="text-red-600" th:text="${usernameError}"></div>
				</div>
			</div>

			<div th:if="${emailError}" class="py-2">
				<div class="flex justify-center">
					<div class="text-red-600" th:text="${emailError}"></div>
				</div>
			</div>

			<!-- Client-side errors -->
			<div id="emailError" class="hidden py-2">
				<div class="flex justify-center">
					<div class="text-red-600">Please enter a valid email address</div>
				</div>
			</div>
			<div id="passwordError" class="hidden py-2">
				<div class="flex justify-center">
					<div class="text-red-600">Passwords do not match</div>
				</div>
			</div>

			<!-- Email field -->
			<label for="email" class="mb-2 text-sm flex justify-start text-gray-900">Email</label>
			<input
				id="email"
				name="email"
				type="email"
				class="flex items-center w-full px-5 py-4 mb-2 mr-2 text-sm font-medium outline-none focus:bg-gray-300 placeholder:text-gray-300 bg-gray-100 text-dark-gray-800 rounded-2xl"
				required
				oninput="validateEmail()"
			/>

			<!-- Username field -->
			<label for="username" class="mb-2 text-sm flex justify-start text-gray-900">Username</label>
			<input
				id="username"
				name="username"
				type="text"
				class="flex items-center w-full px-5 py-4 mb-5 mr-2 text-sm font-medium outline-none focus:bg-gray-300 placeholder:text-gray-300 bg-gray-100 text-dark-gray-800 rounded-2xl"
				required
			/>

			<!-- Password field -->
			<label for="password" class="mb-2 text-sm flex justify-start text-gray-900">Password</label>
			<input
				id="password"
				name="password"
				type="password"
				class="flex items-center w-full px-5 py-4 mb-2 mr-2 text-sm font-medium outline-none focus:bg-gray-300 placeholder:text-gray-300 bg-gray-100 text-dark-gray-800 rounded-2xl"
				required
				oninput="checkPasswordMatch()"
			/>

			<!-- Confirm Password field -->
			<label for="confirmPassword" class="mb-2 text-sm flex justify-start text-gray-900">Confirm Password</label>
			<input
				id="confirmPassword"
				name="confirmPassword"
				type="password"
				class="flex items-center w-full px-5 py-4 mb-5 mr-2 text-sm font-medium outline-none focus:bg-gray-300 placeholder:text-gray-300 bg-gray-100 text-dark-gray-800 rounded-2xl"
				required
				oninput="checkPasswordMatch()"
			/>

			<button
				type="submit"
				class="w-full focus:outline-none text-white bg-purple-700 hover:bg-purple-800 focus:ring-4 focus:ring-purple-300 font-medium rounded-2xl text-sm px-5 py-4 mb-2 dark:bg-purple-600 dark:hover:bg-purple-700 dark:focus:ring-purple-900">
				Create Account
			</button>
		</form>
		<p class="mt-3 text-sm leading-relaxed text-gray-900">Already have an account? <a href="/login" class="font-bold hover:underline text-blue-700">Sign In</a></p>
		<p class="mt-5 px-8 text-center text-sm text-gray-900">
			By creating an account, you agree to our Terms of Service and Privacy Policy.
		</p>
	</div>
</div>

<script>
	// Email validation
	function validateEmail() {
		const email = document.getElementById('email').value;
		const errorDiv = document.getElementById('emailError');
		const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

		if (email && !emailRegex.test(email)) {
			errorDiv.classList.remove('hidden');
			return false;
		} else {
			errorDiv.classList.add('hidden');
			return true;
		}
	}

	// Password match validation
	function checkPasswordMatch() {
		const password = document.getElementById('password').value;
		const confirmPassword = document.getElementById('confirmPassword').value;
		const errorDiv = document.getElementById('passwordError');

		if (password && confirmPassword && password !== confirmPassword) {
			errorDiv.classList.remove('hidden');
			return false;
		} else {
			errorDiv.classList.add('hidden');
			return true;
		}
	}

	// Form validation
	function validateForm() {
		const isEmailValid = validateEmail();
		const isPasswordValid = checkPasswordMatch();

		return isEmailValid && isPasswordValid;
	}
</script>
</body>
</html>